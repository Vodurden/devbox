#!/usr/bin/env bash
set -euo pipefail

SOURCE_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

echo "Provisioning osx nix user configuration."
${SOURCE_DIR}/scripts/install-default-nixpkgs nixpkgs-darwin

echo "Provisioning osx home configuration."
${SOURCE_DIR}/scripts/install-nix-env osx-dev-env
${SOURCE_DIR}/scripts/sync-spacemacs
${SOURCE_DIR}/scripts/sync-vim
${SOURCE_DIR}/scripts/sync-bash-my-aws

echo "Provisioning rea configuration"
${SOURCE_DIR}/scripts/rea/install-private-nixpkgs
${SOURCE_DIR}/scripts/rea/sync-aws-shortcuts

echo "Provisioning dotfiles"
${SOURCE_DIR}/scripts/link-dotfiles common
${SOURCE_DIR}/scripts/link-dotfiles work-rea

echo "Provisioning private files"
${SOURCE_DIR}/scripts/sync-private

echo "Provisioning complete."
